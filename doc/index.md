# Racc - Ruby LALR(1) Parser Generator

## Overview

Racc (Ruby yACC) is an LALR(1) parser generator for Ruby, similar to yacc for C. It generates parser classes from grammar files (.y files), allowing you to process structured text and implement domain-specific languages.

### Key Features

- LALR(1) parsing algorithm (same as yacc/bison)
- Generates pure Ruby parser classes
- Operator precedence support
- Error recovery mechanisms
- Embedded runtime (optional standalone parsers)
- Debug mode for troubleshooting

## Quick Start

### Installation

Racc runtime is included with Ruby 1.8.0 and later. For standalone installation:

```bash
gem install racc
```

### Basic Usage

1. Create a grammar file (e.g., `calc.y`):

```ruby
class Calculator
rule
  expression: NUMBER
            | expression '+' NUMBER { result = val[0] + val[2] }
            | expression '-' NUMBER { result = val[0] - val[2] }
end

---- inner
  def parse(input)
    @tokens = input
    do_parse
  end

  def next_token
    @tokens.shift
  end
```

2. Generate the parser:

```bash
racc calc.y -o calc.rb
```

3. Use your parser:

```ruby
require './calc'

parser = Calculator.new
result = parser.parse([
  [:NUMBER, 5],
  ['+', '+'],
  [:NUMBER, 3]
])
puts result  # => 8
```

## Documentation

This documentation is organized into the following sections:

- [Getting Started](getting-started.md) - Step-by-step tutorial for creating your first parser
- [Grammar Reference](grammar-reference.md) - Complete grammar file syntax reference
- [Command Reference](command-reference.md) - racc command-line options and usage
- [Parser Class Reference](parser-class-reference.md) - Racc::Parser class methods and APIs
- [Debugging](debugging.md) - Troubleshooting and debugging techniques
- [Advanced Topics](advanced-topics.md) - Operator precedence, error recovery, and advanced features

## What is Racc?

Racc is a tool for processing grammar. A string is just a sequence of characters and has no inherent meaning to computers. However, humans can find meaning in these character sequences. Racc helps computers partially understand this meaning through automation.

### What Racc Does

Racc automates the processing of the "structure" contained in strings. For example, consider Ruby's if statement:

```
if condition [then]
  statements
  ...
[elsif condition [then]
  statements
  ...]
[else
  statements
  ...]
end
```

In an if statement, the word "if" must come first, and elsif clauses must come before else clauses. These structural relationships are what Racc processes.

### What Racc Cannot Do

What Racc cannot process automatically is the "semantic meaning" - for example, understanding that a condition expression in an if statement is actually a condition. You must write code to handle the semantic meaning through "actions" in your grammar.

## How Racc Works

### The Two-Stage Process

Parser processing typically involves two stages:

1. Lexical Analysis (Scanning): Breaking the character stream into a token stream
2. Syntax Analysis (Parsing): Recognizing higher-level patterns in the token stream

For example, this input:

```ruby
if flag then   # item found.
  puts 'ok'
end
```

Becomes this token stream:

```
IF IDENT THEN IDENT STRING END
```

### Terminals and Non-terminals

Grammar symbols are divided into two types:

- Terminal symbols: Tokens produced by the lexer (IF, IDENT, NUMBER, etc.)
- Non-terminal symbols: Higher-level constructs built from terminals (expression, statement, etc.)

The parser builds non-terminal symbols from terminals according to your grammar rules, ultimately reducing the entire input to a single start symbol if the input is valid.

## Runtime Requirements

Parsers generated by Racc require the Racc runtime module to operate:

- Ruby 1.8.0+: Runtime is included, no action needed
- Ruby 1.6.x: Use `racc -E` to generate standalone parsers with embedded runtime

The runtime includes:
- `racc/parser.rb` - Core parser functionality (required)
- `cparse.so` - Optional C extension for performance (not required, but recommended)

## Distribution

When distributing parsers created with Racc:

### For Ruby 1.8.0+
Simply distribute your generated .rb file. Users with Ruby 1.8+ already have the runtime.

### For Ruby 1.6.x or Standalone Distribution
Use the `-E` option to embed the runtime:

```bash
racc -E mygrammar.y -o myparser.rb
```

This creates a single file with no external dependencies (except Ruby itself). Note that the C extension cannot be used with this option, so parsing will be slower.

## Repository

GitHub: https://github.com/ruby/racc

To clone the latest version:

```bash
git clone https://github.com/ruby/racc.git
```

## Additional Resources

- For writing scanners, consider using the `strscan` library (included with Ruby 1.8+)
- For a tutorial combining Racc with Rexical (a lexer generator), see the Getting Started guide

## Getting Help

If you're new to parser generators:
- Start with the [Getting Started](getting-started.md) guide
- Work through the examples in the repository
- Consult "Compilers: Principles, Techniques, and Tools" (the "Dragon Book") for theory

If you're familiar with yacc:
- Jump to [Grammar Reference](grammar-reference.md) to see syntax differences
- Review [Parser Class Reference](parser-class-reference.md) for API differences
